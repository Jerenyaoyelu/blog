# 概览

作为一种CSS扩展，不仅向后兼容CSS，它还使用现有的CSS语法新增了额外的特性，如变量，混合，函数等。

# 变量

变量前面必须加`@`

```less
@nice-blue: #5B83AD;
@light-blue: @nice-blue + #111;
#header {
  color: @light-blue;
}
```

输出：

```css
#header {
  color: #6c94be;
}
```

> 变量只能定义一次，实际上他们就是“常量”。

# Mixins（混合）

一种将一系列属性从一个规则集引入到另一个规则集的方式。

例子：

```less
.bordered {
  border-top: dotted 1px black;
  border-bottom:solid 2px black;
}

//将以上规则集属性使用在另一个规则集上
//我们只需要访问属性所在类名称即可
#menu a {
  color: #111;
  .bordered;
}
.post a {
  color:red;
  .bordered;
}
```

类`.bordered`的属性并会呈现在`#menu a`和`.post a`中了。

> 同样也可以将id选择器作为mixins
>
> ```less
> .a, #b {
>   color: red;
> }
> .mixin-class {
>   .a();
>   //.a;
> }
> .mixin-id {
>   #b();
>   //#b;
> }
> ```
>
> ```less
> //输出
> .a, #b {
>   color: red;
> }
> .mixin-class {
>   color: red;
> }
> .mixin-id {
>   color: red;
> }
> ```
>
> 注：调用混合集时，括号加不加都可。

### Not Outputting the Mixin

若想要创建一个混合集，但不想要输出到你的样式中，则可以在混合集的名字后面加上一个括号。

> 若传入参数，则变为带参数的Mixins，会输出到样式中

```less
.my-mixin {
  color: black;
}
//这个mixin不会输出到样式中，但是其样式会应用到调用的地方
.my-other-mixin() {
  background: white;
}
.class {
  .my-mixin;
  .my-other-mixin;
}
```

 输出：

```less
.my-mixin {
  color: black;
}
.class {
  color: black;
  background: white;
}
```

### Selectors in Mixins

混合集不仅可以包含各种属性，而且可以包含各种选择器

```less
.my-hover-mixin(){
  &:hover {
    border: 1px solid red;
  }
}
botton {
  .my-hover-mixin();
}
```

输出：

```less
button:hover {
  border: 1px solid red;
}
```

#### **`&`详解**

- **当前选择器的伪类或者伪元素**

  上述例子即位此情况：`button:hover`

- **作为内层选择器表示对父选择器的引用**

  ```less
  .demo {
    &-title {
      text-align: center;
    }
  }
  
  //编译结果：
  .demo-title {
    text-align: center;
  }
  
  ```

  **注意⚠️**

  > 与以下代码不同

  ```less
  .demo {
    .demo-title {
      text-align: center;
    }
  }
  //或者
  .demo {
    & &-title {
      text-align: center;
    }
  }
  
  
  //编译结果
  .demo .demo-title {
    text-align: center;
  }
  ```

  **父类选择器引用的高级用法**：

  ```less
  .demo-title {
    .demo & {
      font-size: 20px;
    }
  }
  
  //编译结果
  .demo .demo-title {
    font-size: 20px;
  }
  ```

### Namespaces

如果想要将属性混合到比较复杂的选择器中，可以通过嵌套多层id或者class

```less
#outer {
  .inner {
    color: red;
  }
}

.c {
  #outer > .inner;
}

//以下四种写法是一样的
#outer > .inner;
#outer > .inner();
#outer.inner;
#outer.inner();
```

这种用法的效果相当于命名空间，你可以把混合集放到一个id选择器中，<u>这样确保它不会跟其他库冲突。</u>

另外的例子：

```less
#my-library {
  .my-mixin() {
    color: black;
  }
}
// 可以这样调用
.class {
  #my-library > .my-mixin();
}
```

### !important 关键字

在调用的混合集后面追加`!important`关键字，可以是混合集里面的所有属性都继承`!important`

```less
.foo (@bg: #f5f5f5, @color: #900) {
  background: @bg;
  color: @color;
}
.unimportant {
  .foo();
}
.important {
  .foo() !important;
}
```

输出：

```less
.unimportant {
  background: #f5f5f5;
  color: #900;
}
.important {
  background: #f5f5f5 !important;
  color: #900 !important;
}
```

###  带参数的Mixins

mixins也可以接受参数，在它进行mix in操作时会将变量传递给选择器代码块。

```less
.border-radius(@radius) {
  -webkit-border-radius: @radius;
     -moz-border-radius: @radius;
          border-radius: @radius;
}

//使用
#header {
  .border-radius(4px);
}
.button {
  .border-radius(6px);
}
```

为参数设置默认值：

```less
.border-radius(@radius: 5px) {
  -webkit-border-radius: @radius;
     -moz-border-radius: @radius;
          border-radius: @radius;
}

//你可以先这样使用
#header {
  .border-radius;
}
```

### 带多个参数的Mixins

参数可以用分号或者逗号分割，但推荐用分号。

> 因为逗号可以解释为mixins参数分隔符或者css列表分隔符

使用逗号`,`作为mixin的分隔符则无法用它创建逗号`,`分割的参数列表。

即，如果编译器在mixin调用或者声明中看到至少一个分号`;`，它会假设参数是由分号`;`分割的，而所有的逗号`,`都属于CSS列表:

- 两个参数，并且每个参数都是逗号分割的列表：`.name(1,2,3;something, ele)`，
- 三个参数，并且每个参数都包含一个数字：`.name(1,2,3)`，
- 使用伪造的分号创建mixin，调用的时候参数包含一个逗号分割的css列表：`.name(1,2,3;)`，
- 逗号分割默认值：`.name(@param1: red, blue)`。

定义多个具有相同名称和不同参数数量的mixins是合法的。Less会使用s所有它可以应用的属性。

```less
.mixin(@color) {
  color-1: @color;
}
.mixin(@color; @padding: 2) {
  color-2: @color;
  padding-2: @padding;
}
.mixin(@color; @padding; @margin: 2) {
  color-3: @color;
  padding-3: @padding;
  margin: @margin @margin @margin @margin;
}
.some .selector div {
  .mixin(#008000);
}
```

编译结果：

```less
.some .selector div {
  color-1: #008000;
  color-2: #008000;
  padding-2: 2;
}
```

这里`.mixin(#008000)`只带了一个参数，但是由于`.mixin(@color; @padding: 2) `中的另外一个参数设置了默认值，所以`.mixin(@color) `和`.mixin(@color; @padding: 2) `都被应用了。